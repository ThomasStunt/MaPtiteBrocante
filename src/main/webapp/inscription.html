<!DOCTYPE html>
<html>
	<head>
		<title>Inscription</title>
		<meta charset="utf-8">
		<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.js"></script>

		<link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">

		<script src="other/jquery-ui.min.js"></script>

		<link rel="stylesheet" href="other/jquery-ui.min.js">

		<script src="./main.js"></script>
		<script src="http://crypto-js.googlecode.com/svn/tags/3.0.2/build/rollups/aes.js"></script>
	</head>	
	<body>
		<div class="container">
			<div>
				<h1>Inscription</h1>
				<hr>
			</div>		
			<br/>
			<div class="form-group col-sm-10" id="inscripDiv">
				<form role="form" id="pseudoForm" class="form-horizontal">
					<div class="form-group">
						<label class="control-label col-sm-2">Pseudo : </label>
						<div class="col-sm-10">
							<input type="text" id="pseudoInscrit" class="form-control"/>
						</div>	
					</div>
				</form>
				<form role="form" id="pwdForm" class="form-horizontal">
					<div class="form-group">
						<label class="control-label col-sm-2">Mot de passe : </label>
						<div class="col-sm-10">
							<input type="text" id="pwdInscrit" class="form-control"/>
						</div>	
					</div>
				</form>
				<div class="col-sm-offset-2 col-sm-10">
					<button class="btn btn-default" id="inscripButton">S'inscrire</button>
					<script type="text/javascript">
						$("#inscripButton").click(function() {


						if($("#pseudoInscrit").val() != "") {
						     $.ajax
						     ({
						       type: "GET",
						       url: "/v1/userdb",
						       dataType: 'json',
						       beforeSend : function(req) {
							req.setRequestHeader("Authorization", "Basic " + btoa($("#pseudoInscrit").val() + ":" + $("#pwdInscrit").val()));
						       },
						       success: function (data){
									document.location.href="connexion.html"
						       },
						       error : function(jqXHR, textStatus, errorThrown) {
						       			alert('error: ' + textStatus);
						       		}
						     });
						     } else {
						     $.getJSON(url, function(data) {
						     	    afficheUser(data);
							});
						     }
						});
					</script>
				</div>
			</div>
		</div>
	</body>
</html>
